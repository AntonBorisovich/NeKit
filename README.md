# NeKit
New Kitsune. Тупо бот для дискорда

## Установка
- Установите [Node.js®](https://nodejs.org/) (v16.9.0 и выше) 
- Установите canvas [по инструкции](https://github.com/Automattic/node-canvas/wiki) для вашей ОС
- Установите шрифт [Lobster](https://fonts.google.com/specimen/Lobster)
- Установить все модули прописав `npm i` в директории с package.json
- Укажите токен вашего бота в src/config/secrets.json, который вы можете найти на [Портале Разработчиков Discord](https://discord.com/developers/)
- Откройте start.bat на Windows или пропишите `node index` на других системах в директории с index.js для запуска.

## Всякое что надо знать
#### Нумерация версий
Версия формируется в формате X.Y.Z
- X меняется только в том случае, если код не совместим со старыми модулями и/или загрузчиком. (major)
- Y меняется, если какой-либо функционал был вырезан и/или добавлен. (minor)
- Z меняется, если не произошло изменение функционала. Например исправление ошибки или оптимизация. (fix)

Примеры:
- Скрипт soc.js версии 1.2.0 не совместим с boot.js версии 2.0.0, т.к. их мажорные версии не совпадают.
- Скрипт soc.js версии 1.2.0 полностью совместим с command.js версии 1.17.20, т.к. их мажорные версии совпадают.
- Скрипт comm.js версии 1.1.2 и comm.js версии 1.1.3 полностью взаимозаменяемые, т.к. не произошло никаких значительных изменений.
- Скрипт commy.js версии 1.10.5 и commy.js версии 1.11.0 могут быть заменены между собой, но возможно будут отсутствовать некоторые функции.

#### Соединение с серверами discord.com
Пока что не реализовано полное отслеживание ошибок соединения, что может вызвать проблемы, если бот работает в течении долгого времени.
WebSocket discord.js-а вроде бы умеет и отслеживать ошибки, и переподключатся самостоятельно, но пока мне не ясно как заставить это работать.

## Всякие TODO листы
(крестиков больше не будет. Если какой либо пункт был выполнен, то он просто будет удалён отсюда)

TODO загрузчика:
- [ ] Обработка аргументов запуска через библиотеку commander

TODO discord (общение с соц. сетью):
- [ ] Переделать хранение тайм-аутов и текущих работ из map в collection
- [ ] Оптимизировать обработку сообщений, наверно. Всё таки это самая юзаемая функция
- [ ] Поддержка голосовых каналов

TODO functions:
- [ ] Лог ошибок пользователю и автоматический выход при ошибке если она была критичной

TODO остальное:
- [ ] Переписать команду orgp под новый сайт с возможностью отслеживать транспорт по карте
- [ ] Сделать команду settings, где можно будет выбрать политику сбора данных, язык (?), пинг при ответе и другое
- [ ] Выбрать лицензию на гитхабе лол

TODO дизайн?:
- [ ] Докрасить аватарку сенко


